component MediaButton inherits TouchArea {

    in property <image> image-url;
    width: 30px;
    height: 30px;
    icon := Image {
        width: 30px;
        height: 30px;
        source: image-url;
    }
}

export component Sidebar inherits Rectangle {
    width: 180px;
    background: #1b1b1b;

    callback skip_back <=> skip_back.clicked;
    callback play_pause <=> play.clicked;
    callback skip_forward <=> skip_forward.clicked;

    in-out property <string> song-title <=> title.text;
    in-out property <image> cover_art <=> cover.source;


    VerticalLayout {
        alignment: start;
        padding-top: 15px;
        padding-bottom: 30px;
        spacing: 10px;
        padding-left: 30px;
        padding-right: 30px;
        art := Rectangle {   
            width: 120px;
            height: 120px;
            border-width: 1px;
            border-color: #3f3f3f;
            cover := Image {
                height: 120px;
                width: 120px;
                source: @image-url("");
            }
        }

        title := Text {
            horizontal-alignment: center;
            font-size: 16px;
        }

        media_controls := Rectangle {


            HorizontalLayout {
                alignment: space-around;

                skip_back := MediaButton {
                    image-url: @image-url("img/skip.png");
                }
                play := MediaButton {
                    image-url: @image-url("img/play.png");
                }
                skip_forward := MediaButton {
                    image-url: @image-url("img/skip.png");
                }

            }
        }
    }
}

component PopOutItem inherits Rectangle {

    in property <image> image-source <=> img.source;
    in property <bool> popping;
    callback clicked <=> touch.clicked;

    img := Image {
        width: popping ? 10px : 30px;
        animate width {
            duration: 50ms;
        }
    }

    touch := TouchArea {

    }
    
}

export component PopOut inherits Rectangle {
    width: !touch.has-hover ? 15px : 60px;
    x: 0px;
    animate width {
         duration: 50ms;
    }
    background: #000;

    in-out property<int> current_item;

    

    touch := TouchArea {

        VerticalLayout {
            alignment: start;
            spacing: !touch.has-hover ? 1px : 5px;
            padding-top: 5px;
            animate spacing {
                 duration: 50ms;
            }
    
    
            home := PopOutItem {
                image-source: @image-url("img/home.png");
                popping: !touch.has-hover;
                clicked => {root.current-item = 0;}
            }
    
            search := PopOutItem {
                image-source: @image-url("img/search.png");
                popping: !touch.has-hover;
                clicked => {root.current-item = 1;}
            }

            playlists := PopOutItem {
                image-source: @image-url("img/playlist.png");
                popping: !touch.has-hover;
                clicked => {root.current-item = 2;}
            }

            settings := PopOutItem {
                image-source: @image-url("img/settings.png");
                popping: !touch.has-hover;
                clicked => {root.current-item = 3;}
            }
        }
     }
    
}


